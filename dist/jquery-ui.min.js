!function(e,t){switch(!1){case!("function"==typeof define&&define.amd):define(["underscore","backbone-forms","jquery-ui"],t);break;case"object"!=typeof exports:require("jquery-ui"),t(require("underscore"),require("backbone-forms"));break;default:t(e._,e.Backbone.Form)}}(this,function(e,t){t.editors["jqueryui.Date"]=t.Editor.extend({className:"bbf-jui-date",render:function(){return this.$el.html('<input type="text">'),this.$("input").datepicker(),this.value=function(){switch(!1){case!(this.value&&e.isDate(this.value)):return this.value;case!(this.value&&e.isString(this.value)):return new Date(this.value);default:return new Date}}.call(this),this.setValue(this.value),this._observeDatepickerEvents(),this},getValue:function(){return this.$el.datepicker("getDate")},setValue:function(e){this.$el.datepicker("setDate",e)},focus:function(){this.hasFocus||this.$el.datepicker("show")},blur:function(){this.hasFocus&&this.$el.datepicker("hide")},_observeDatepickerEvents:function(){this.$el.datepicker("option","onSelect",function(e){return function(){e.trigger("change",e)}}(this)),this.$el.datepicker("option","onClose",function(e){return function(){e.hasFocus&&e.trigger("blur",e)}}(this)),this.$el.datepicker("option","beforeShow",function(e){return function(){return e.hasFocus||e.trigger("focus",e),{}}}(this))}})});